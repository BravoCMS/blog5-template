<div id="test">
    <link href="/design/css/admin/select2-4/css/select2.min.css" rel="stylesheet" />
    <script src="/design/css/admin/select2-4/js/select2.min.js"></script>

    <script>
        jQuery(function ($) {
            $(".js-select2-test").select2({
                ajax: {
                    url: "/admin/ajax/article2_articles.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data.items,
                            pagination: {
                                more: data.pagination.page < data.pagination.total
                            }
                        };
                    },
                    cache: true
                }
            });

            $(".js-select2-test2").select2({
                ajax: {
                    url: "/admin/ajax/article2_articles.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data.items,
                            pagination: {
                                more: data.pagination.page < data.pagination.total
                            }
                        };
                    },
                    cache: true
                }
            });
        });
    </script>

    <select class="js-select2-test form-control">
    </select>

    <select class="js-select2-test2 form-control" multiple="1">
    </select>

    <script>
        jQuery(function ($) {
            $(".js-select2-authors-test").select2({
                ajax: {
                    url: "/admin/ajax/article2_articles_authors.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data.items,
                            pagination: {
                                more: data.pagination.page < data.pagination.total
                            }
                        };
                    },
                    cache: true
                }
            });

            $(".js-select2-authors-test2").select2({
                ajax: {
                    url: "/admin/ajax/article2_articles_authors.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data.items,
                            pagination: {
                                more: data.pagination.page < data.pagination.total
                            }
                        };
                    },
                    cache: true
                }
            });
        });
    </script>

    <select class="js-select2-authors-test form-control">
    </select>

    <select class="js-select2-authors-test2 form-control" multiple="1">
    </select>

    <script>
        jQuery(function ($) {
            $(".js-select2-albums-test").select2({
                ajax: {
                    url: "/admin/ajax/article2_photos_albums.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data.items,
                            pagination: {
                                more: data.pagination.page < data.pagination.total
                            }
                        };
                    },
                    cache: true
                }
            });

            $(".js-select2-albums-test2").select2({
                ajax: {
                    url: "/admin/ajax/article2_photos_albums.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data.items,
                            pagination: {
                                more: data.pagination.page < data.pagination.total
                            }
                        };
                    },
                    cache: true
                }
            });
        });
    </script>

    <select class="js-select2-albums-test form-control">
    </select>

    <select class="js-select2-albums-test2 form-control" multiple="1">
    </select>

    <script>
        jQuery(function ($) {
            $(".js-select2-pages-test").select2({
                ajax: {
                    url: "/admin/ajax/article2_pages.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data
                        };
                    },
                    cache: true
                }
            });

            $(".js-select2-pages-test2").select2({
                ajax: {
                    url: "/admin/ajax/article2_pages.htm",
                    data: function (params) {
                        params.q = params.term;
                        params.modules = [
                            'public',
                            'text'
                        ];
                        return params;
                    },
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data
                        };
                    },
                    cache: true
                }
            });
        });
    </script>

    <select class="js-select2-pages-test form-control">
    </select>

    <select class="js-select2-pages-test2 form-control" multiple="1">
    </select>

    <script>
        jQuery(function ($) {
            $(".js-select2-rubric-type-test").select2({
                ajax: {
                    url: "/admin/ajax/article2_rubric_types.htm",
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data
                        };
                    },
                    cache: true
                }
            });

            $(".js-select2-rubric-type-test").on('change', function () {
                var value = $(this).find('option:selected').val();
                catalogArticlesQueryParams.rubricType = value;
                catalogArticlesQueryParams.rubric = 0;
                catalogArticlesQueryParams.category = 0;

                $(".js-select2-rubric-test").select2({
                    ajax: {
                        url: "/admin/ajax/article2_rubrics.htm",
                        data: function (params) {
                            params.q = params.term;
                            params.rubricType = value;
                            return params;
                        },
                        dataType: 'jsonp',
                        delay: 250,
                        processResults: function (data) {
                            return {
                                results: data
                            };
                        },
                        cache: true
                    }
                });
            });

            $(".js-select2-rubric-test").on('change', function () {
                var value = $(this).find('option:selected').val();
                catalogArticlesQueryParams.rubric = value;
                catalogArticlesQueryParams.category = 0;

                $(".js-select2-category-test").select2({
                    ajax: {
                        url: "/admin/ajax/article2_categories.htm",
                        data: function (params) {
                            params.q = params.term;
                            params.rubric = value;
                            return params;
                        },
                        dataType: 'jsonp',
                        delay: 250,
                        processResults: function (data) {
                            return {
                                results: data
                            };
                        },
                        cache: true
                    }
                });
            });

            $(".js-select2-category-test").on('change', function () {
                var value = $(this).find('option:selected').val();
                catalogArticlesQueryParams.category = value;
            });

            var catalogArticlesQueryParams = {};
            $(".js-select2-catalog-article-test").select2({
                ajax: {
                    url: "/admin/ajax/article2_catalog_articles.htm",
                    data: function (params) {
                        params.q = params.term;
                        params = $.extend(params, catalogArticlesQueryParams);
                        return params;
                    },
                    dataType: 'jsonp',
                    delay: 250,
                    processResults: function (data) {
                        return {
                            results: data.items,
                            pagination: {
                                more: data.pagination.page < data.pagination.total
                            }
                        };
                    },
                    cache: true
                }
            });
        });
    </script>

    <select class="js-select2-rubric-type-test form-control">
    </select>

    <select class="js-select2-rubric-test form-control">
    </select>

    <select class="js-select2-category-test form-control">
    </select>

    <select class="js-select2-catalog-article-test form-control" multiple="1">
    </select>
</div>